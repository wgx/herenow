!function(){const r="https://herenow-anhz7w.fly.dev";const n="liveCounterSessionId",i=document.querySelectorAll(".herenow");if(0===i.length)console.error('Element with class "herenow" not found.');else{const c=window.location.hostname+window.location.pathname;let a=!0;const o=function(){let e=sessionStorage.getItem(n);return e||(e=Date.now().toString(36)+Math.random().toString(36).substring(2),sessionStorage.setItem(n,e)),e}();async function e(){try{await fetch(r+"/ping",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:o,page:c})})}catch(e){console.error("Failed send ping:",e)}}async function t(){try{var n=encodeURIComponent(c),t=await fetch(r+"/count?page="+n);if(!t.ok)throw new Error("Server responded with status: "+t.status);let e=(await t.json()).count||0;a&&0===e&&(e=1),a=!1;var o=1===e?"user":"users";const s=e+` ${o} here now`;i.forEach(e=>{e.textContent=s})}catch(e){console.error("Failed to fetch count:",e),i.forEach(e=>{e.textContent="Herenow unavailable"})}}e(),t(),setInterval(e,15e3),setInterval(t,15e3),window.addEventListener("beforeunload",function(){var e=new Blob([JSON.stringify({sessionId:o,page:c})],{type:"application/json"});navigator.sendBeacon(r+"/ping",e)})}}();